{% extends 'base.html' %}

{% block content %}
<div class="profile-header">
    {% if profile_user.avatar %}
        <img src="{{ profile_user.avatar.url }}" alt="Avatar" class="avatar">
    {% else %}
        <div class="avatar" style="background: #333; display: flex; align-items: center; justify-content: center; font-size: 3rem;">
            üë§
        </div>
    {% endif %}
    <div>
        <h1 style="color: #00ffff; display: flex; align-items: center; margin-bottom: 1rem;">
            {{ profile_user.nickname }}
            {% if profile_user.is_organizer %}
                <span class="organizer-badge">–û–†–ì–ê–ù–ò–ó–ê–¢–û–†</span>
            {% endif %}
        </h1>
        <p><strong>–ò–º—è:</strong> {{ profile_user.real_name|default:"–ù–µ —É–∫–∞–∑–∞–Ω–æ" }}</p>
        <p><strong>–ì–æ—Ä–æ–¥:</strong> {{ profile_user.city.name|default:"–ù–µ –≤—ã–±—Ä–∞–Ω" }}</p>
        {% if profile_user.bio %}
            <p><strong>–û —Å–µ–±–µ:</strong> {{ profile_user.bio }}</p>
        {% endif %}
        
        {% if user == profile_user %}
            <div style="margin-top: 1.5rem; display: flex; gap: 1rem; flex-wrap: wrap;">
                <a href="{% url 'edit_profile' %}" class="btn-primary" style="width: auto; padding: 10px 20px;">
                    –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
                </a>
                <a href="{% url 'add_car_photo' %}" class="btn-primary" style="width: auto; padding: 10px 20px; background: #333; color: #00ffff;">
                    –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ –º–∞—à–∏–Ω—ã
                </a>
            </div>
        {% endif %}
    </div>
</div>

{% if profile_user.is_organizer and user_meetups %}
<div class="section-title">–ú–æ–∏ —Ç—É—Å–æ–≤–∫–∏</div>
<div class="card-grid">
    {% for meetup in user_meetups %}
    <a href="{% url 'meetup_detail' meetup.pk %}" style="text-decoration: none;">
        <div class="card">
            <div class="meetup-type">{{ meetup.get_meetup_type_display }}</div>
            <h3 class="card-title">{{ meetup.title }}</h3>
            <p><strong>–ì–æ—Ä–æ–¥:</strong> {{ meetup.city.name }}</p>
            <p><strong>–ö–æ–≥–¥–∞:</strong> {{ meetup.date_time|date:"d.m.Y H:i" }}</p>
            <p><strong>–°—Ç–∞—Ç—É—Å:</strong> {% if meetup.is_upcoming %}–ü—Ä–µ–¥—Å—Ç–æ—è—â–∞—è{% else %}–ó–∞–≤–µ—Ä—à–µ–Ω–∞{% endif %}</p>
        </div>
    </a>
    {% endfor %}
</div>
{% endif %}

<div class="section-title">–ì–∞–ª–µ—Ä–µ—è –º–∞—à–∏–Ω</div>
{% if profile_user.car_photos.all %}
    <div class="gallery">
        {% for photo in profile_user.car_photos.all %}
            <img src="{{ photo.photo.url }}" alt="Car photo {{ forloop.counter }}">
        {% endfor %}
    </div>
{% else %}
    <p class="text-muted" style="text-align: center; padding: 2rem;">–ü–æ–∫–∞ –Ω–µ—Ç —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –º–∞—à–∏–Ω.</p>
{% endif %}
{% endblock %}